import{b as ee,i as de,_ as ae,d as R,u as te,c as I,a as E,o as d,e as N,t as O,w as M,r as Y,f as i,E as ge,g as We,h as Le,m as Re,j as Ve,k as ne,l as w,n as Q,p as y,F as ye,q as Ce,s as Je,v as Xe,x as C,y as Ze,z as Qe,A as v,B as Pe,C as ce,D as H,G as Ye,H as Ee,I as xe,J as le,K as J,L as ea,M as aa,N as ta,O as na,P as sa,Q as X,R as oa,S as la,T as ia,U as ra,V as ie,W as _e,X as ua,Y as oe,Z as fe,$ as ue,a0 as Ie,a1 as ca,a2 as ve,a3 as pe,a4 as da,a5 as pa,a6 as ga,a7 as fa,a8 as va,a9 as Fe,aa as ma,ab as ba,ac as me,ad as Be,ae as Me,af as Te,ag as ha,ah as Oe,ai as ya,aj as be,ak as ke,al as Ca,am as Pa,an as ka,ao as Sa,ap as De,aq as Ue,ar as Ne,as as qe,at as $e,au as za,av as wa,aw as Ea,ax as _a,ay as j,az as Ia,aA as Ba,aB as Ma,aC as Ta,aD as Na,aE as $a,aF as Aa,aG as ja}from"./index-YnGpMTyO.js";import{g as La,P as Ra,a as Va,b as Fa,u as Oa,c as Da,d as Ua,e as qa}from"./const-o76rIcnF.js";import"./el-input-number-CZeJsnsi.js";import"./index-DGlAZmxF.js";const Ke=Symbol("elPaginationKey"),Ka=ee({disabled:Boolean,currentPage:{type:Number,default:1},prevText:{type:String},prevIcon:{type:de}}),Ha={click:e=>e instanceof MouseEvent},Ga=R({name:"ElPaginationPrev"}),Wa=R({...Ga,props:Ka,emits:Ha,setup(e){const l=e,{t:o}=te(),p=I(()=>l.disabled||l.currentPage<=1);return(r,u)=>(d(),E("button",{type:"button",class:"btn-prev",disabled:i(p),"aria-label":r.prevText||i(o)("el.pagination.prev"),"aria-disabled":i(p),onClick:m=>r.$emit("click",m)},[r.prevText?(d(),E("span",{key:0},O(r.prevText),1)):(d(),N(i(ge),{key:1},{default:M(()=>[(d(),N(Y(r.prevIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var Ja=ae(Wa,[["__file","prev.vue"]]);const Xa=ee({disabled:Boolean,currentPage:{type:Number,default:1},pageCount:{type:Number,default:50},nextText:{type:String},nextIcon:{type:de}}),Za=R({name:"ElPaginationNext"}),Qa=R({...Za,props:Xa,emits:["click"],setup(e){const l=e,{t:o}=te(),p=I(()=>l.disabled||l.currentPage===l.pageCount||l.pageCount===0);return(r,u)=>(d(),E("button",{type:"button",class:"btn-next",disabled:i(p),"aria-label":r.nextText||i(o)("el.pagination.next"),"aria-disabled":i(p),onClick:m=>r.$emit("click",m)},[r.nextText?(d(),E("span",{key:0},O(r.nextText),1)):(d(),N(i(ge),{key:1},{default:M(()=>[(d(),N(Y(r.nextIcon)))]),_:1}))],8,["disabled","aria-label","aria-disabled","onClick"]))}});var Ya=ae(Qa,[["__file","next.vue"]]);const Se=()=>We(Ke,{}),xa=ee({pageSize:{type:Number,required:!0},pageSizes:{type:Ve(Array),default:()=>Re([10,20,30,40,50,100])},popperClass:{type:String},disabled:Boolean,teleported:Boolean,size:{type:String,values:Le},appendSizeTo:String}),et=R({name:"ElPaginationSizes"}),at=R({...et,props:xa,emits:["page-size-change"],setup(e,{emit:l}){const o=e,{t:p}=te(),r=ne("pagination"),u=Se(),m=w(o.pageSize);Q(()=>o.pageSizes,(s,S)=>{if(!Ze(s,S)&&Qe(s)){const c=s.includes(o.pageSize)?o.pageSize:o.pageSizes[0];l("page-size-change",c)}}),Q(()=>o.pageSize,s=>{m.value=s});const k=I(()=>o.pageSizes);function P(s){var S;s!==m.value&&(m.value=s,(S=u.handleSizeChange)==null||S.call(u,Number(s)))}return(s,S)=>(d(),E("span",{class:C(i(r).e("sizes"))},[y(i(Xe),{"model-value":m.value,disabled:s.disabled,"popper-class":s.popperClass,size:s.size,teleported:s.teleported,"validate-event":!1,"append-to":s.appendSizeTo,onChange:P},{default:M(()=>[(d(!0),E(ye,null,Ce(i(k),c=>(d(),N(i(Je),{key:c,value:c,label:c+i(p)("el.pagination.pagesize")},null,8,["value","label"]))),128))]),_:1},8,["model-value","disabled","popper-class","size","teleported","append-to"])],2))}});var tt=ae(at,[["__file","sizes.vue"]]);const nt=ee({size:{type:String,values:Le}}),st=R({name:"ElPaginationJumper"}),ot=R({...st,props:nt,setup(e){const{t:l}=te(),o=ne("pagination"),{pageCount:p,disabled:r,currentPage:u,changeEvent:m}=Se(),k=w(),P=I(()=>{var c;return(c=k.value)!=null?c:u==null?void 0:u.value});function s(c){k.value=c?+c:""}function S(c){c=Math.trunc(+c),m==null||m(c),k.value=void 0}return(c,A)=>(d(),E("span",{class:C(i(o).e("jump")),disabled:i(r)},[v("span",{class:C([i(o).e("goto")])},O(i(l)("el.pagination.goto")),3),y(i(Pe),{size:c.size,class:C([i(o).e("editor"),i(o).is("in-pagination")]),min:1,max:i(p),disabled:i(r),"model-value":i(P),"validate-event":!1,"aria-label":i(l)("el.pagination.page"),type:"number","onUpdate:modelValue":s,onChange:S},null,8,["size","class","max","disabled","model-value","aria-label"]),v("span",{class:C([i(o).e("classifier")])},O(i(l)("el.pagination.pageClassifier")),3)],10,["disabled"]))}});var lt=ae(ot,[["__file","jumper.vue"]]);const it=ee({total:{type:Number,default:1e3}}),rt=R({name:"ElPaginationTotal"}),ut=R({...rt,props:it,setup(e){const{t:l}=te(),o=ne("pagination"),{disabled:p}=Se();return(r,u)=>(d(),E("span",{class:C(i(o).e("total")),disabled:i(p)},O(i(l)("el.pagination.total",{total:r.total})),11,["disabled"]))}});var ct=ae(ut,[["__file","total.vue"]]);const dt=ee({currentPage:{type:Number,default:1},pageCount:{type:Number,required:!0},pagerCount:{type:Number,default:7},disabled:Boolean}),pt=R({name:"ElPaginationPager"}),gt=R({...pt,props:dt,emits:[ce],setup(e,{emit:l}){const o=e,p=ne("pager"),r=ne("icon"),{t:u}=te(),m=w(!1),k=w(!1),P=w(!1),s=w(!1),S=w(!1),c=w(!1),A=I(()=>{const n=o.pagerCount,a=(n-1)/2,t=Number(o.currentPage),g=Number(o.pageCount);let f=!1,z=!1;g>n&&(t>n-a&&(f=!0),t<g-a&&(z=!0));const h=[];if(f&&!z){const B=g-(n-2);for(let T=B;T<g;T++)h.push(T)}else if(!f&&z)for(let B=2;B<n;B++)h.push(B);else if(f&&z){const B=Math.floor(n/2)-1;for(let T=t-B;T<=t+B;T++)h.push(T)}else for(let B=2;B<g;B++)h.push(B);return h}),G=I(()=>["more","btn-quickprev",r.b(),p.is("disabled",o.disabled)]),V=I(()=>["more","btn-quicknext",r.b(),p.is("disabled",o.disabled)]),b=I(()=>o.disabled?-1:0);Q(()=>[o.pageCount,o.pagerCount,o.currentPage],([n,a,t])=>{const g=(a-1)/2;let f=!1,z=!1;n>a&&(f=t>a-g,z=t<n-g),P.value&&(P.value=f),s.value&&(s.value=z),m.value=f,k.value=z},{immediate:!0});function W(n=!1){o.disabled||(n?P.value=!0:s.value=!0)}function D(n=!1){n?S.value=!0:c.value=!0}function F(n){const a=n.target;if(a.tagName.toLowerCase()==="li"&&Array.from(a.classList).includes("number")){const t=Number(a.textContent);t!==o.currentPage&&l(ce,t)}else a.tagName.toLowerCase()==="li"&&Array.from(a.classList).includes("more")&&U(n)}function U(n){const a=n.target;if(a.tagName.toLowerCase()==="ul"||o.disabled)return;let t=Number(a.textContent);const g=o.pageCount,f=o.currentPage,z=o.pagerCount-2;a.className.includes("more")&&(a.className.includes("quickprev")?t=f-z:a.className.includes("quicknext")&&(t=f+z)),Number.isNaN(+t)||(t<1&&(t=1),t>g&&(t=g)),t!==f&&l(ce,t)}return(n,a)=>(d(),E("ul",{class:C(i(p).b()),onClick:U,onKeyup:le(F,["enter"])},[n.pageCount>0?(d(),E("li",{key:0,class:C([[i(p).is("active",n.currentPage===1),i(p).is("disabled",n.disabled)],"number"]),"aria-current":n.currentPage===1,"aria-label":i(u)("el.pagination.currentPage",{pager:1}),tabindex:i(b)}," 1 ",10,["aria-current","aria-label","tabindex"])):H("v-if",!0),m.value?(d(),E("li",{key:1,class:C(i(G)),tabindex:i(b),"aria-label":i(u)("el.pagination.prevPages",{pager:n.pagerCount-2}),onMouseenter:t=>W(!0),onMouseleave:t=>P.value=!1,onFocus:t=>D(!0),onBlur:t=>S.value=!1},[(P.value||S.value)&&!n.disabled?(d(),N(i(Ye),{key:0})):(d(),N(i(Ee),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):H("v-if",!0),(d(!0),E(ye,null,Ce(i(A),t=>(d(),E("li",{key:t,class:C([[i(p).is("active",n.currentPage===t),i(p).is("disabled",n.disabled)],"number"]),"aria-current":n.currentPage===t,"aria-label":i(u)("el.pagination.currentPage",{pager:t}),tabindex:i(b)},O(t),11,["aria-current","aria-label","tabindex"]))),128)),k.value?(d(),E("li",{key:2,class:C(i(V)),tabindex:i(b),"aria-label":i(u)("el.pagination.nextPages",{pager:n.pagerCount-2}),onMouseenter:t=>W(),onMouseleave:t=>s.value=!1,onFocus:t=>D(),onBlur:t=>c.value=!1},[(s.value||c.value)&&!n.disabled?(d(),N(i(xe),{key:0})):(d(),N(i(Ee),{key:1}))],42,["tabindex","aria-label","onMouseenter","onMouseleave","onFocus","onBlur"])):H("v-if",!0),n.pageCount>1?(d(),E("li",{key:3,class:C([[i(p).is("active",n.currentPage===n.pageCount),i(p).is("disabled",n.disabled)],"number"]),"aria-current":n.currentPage===n.pageCount,"aria-label":i(u)("el.pagination.currentPage",{pager:n.pageCount}),tabindex:i(b)},O(n.pageCount),11,["aria-current","aria-label","tabindex"])):H("v-if",!0)],42,["onKeyup"]))}});var ft=ae(gt,[["__file","pager.vue"]]);const L=e=>typeof e!="number",vt=ee({pageSize:Number,defaultPageSize:Number,total:Number,pageCount:Number,pagerCount:{type:Number,validator:e=>J(e)&&Math.trunc(e)===e&&e>4&&e<22&&e%2===1,default:7},currentPage:Number,defaultCurrentPage:Number,layout:{type:String,default:["prev","pager","next","jumper","->","total"].join(", ")},pageSizes:{type:Ve(Array),default:()=>Re([10,20,30,40,50,100])},popperClass:{type:String,default:""},prevText:{type:String,default:""},prevIcon:{type:de,default:()=>ia},nextText:{type:String,default:""},nextIcon:{type:de,default:()=>la},teleported:{type:Boolean,default:!0},small:Boolean,size:oa,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean,appendSizeTo:String}),mt={"update:current-page":e=>J(e),"update:page-size":e=>J(e),"size-change":e=>J(e),change:(e,l)=>J(e)&&J(l),"current-change":e=>J(e),"prev-click":e=>J(e),"next-click":e=>J(e)},Ae="ElPagination";var bt=R({name:Ae,props:vt,emits:mt,setup(e,{emit:l,slots:o}){const{t:p}=te(),r=ne("pagination"),u=ea().vnode.props||{},m=aa(),k=I(()=>{var a;return e.small?"small":(a=e.size)!=null?a:m.value});ta({from:"small",replacement:"size",version:"3.0.0",scope:"el-pagination",ref:"https://element-plus.org/zh-CN/component/pagination.html"},I(()=>!!e.small));const P="onUpdate:currentPage"in u||"onUpdate:current-page"in u||"onCurrentChange"in u,s="onUpdate:pageSize"in u||"onUpdate:page-size"in u||"onSizeChange"in u,S=I(()=>{if(L(e.total)&&L(e.pageCount)||!L(e.currentPage)&&!P)return!1;if(e.layout.includes("sizes")){if(L(e.pageCount)){if(!L(e.total)&&!L(e.pageSize)&&!s)return!1}else if(!s)return!1}return!0}),c=w(L(e.defaultPageSize)?10:e.defaultPageSize),A=w(L(e.defaultCurrentPage)?1:e.defaultCurrentPage),G=I({get(){return L(e.pageSize)?c.value:e.pageSize},set(a){L(e.pageSize)&&(c.value=a),s&&(l("update:page-size",a),l("size-change",a))}}),V=I(()=>{let a=0;return L(e.pageCount)?L(e.total)||(a=Math.max(1,Math.ceil(e.total/G.value))):a=e.pageCount,a}),b=I({get(){return L(e.currentPage)?A.value:e.currentPage},set(a){let t=a;a<1?t=1:a>V.value&&(t=V.value),L(e.currentPage)&&(A.value=t),P&&(l("update:current-page",t),l("current-change",t))}});Q(V,a=>{b.value>a&&(b.value=a)}),Q([b,G],a=>{l(ce,...a)},{flush:"post"});function W(a){b.value=a}function D(a){G.value=a;const t=V.value;b.value>t&&(b.value=t)}function F(){e.disabled||(b.value-=1,l("prev-click",b.value))}function U(){e.disabled||(b.value+=1,l("next-click",b.value))}function n(a,t){a&&(a.props||(a.props={}),a.props.class=[a.props.class,t].join(" "))}return na(Ke,{pageCount:V,disabled:I(()=>e.disabled),currentPage:b,changeEvent:W,handleSizeChange:D}),()=>{var a,t;if(!S.value)return sa(Ae,p("el.pagination.deprecationWarning")),null;if(!e.layout||e.hideOnSinglePage&&V.value<=1)return null;const g=[],f=[],z=X("div",{class:r.e("rightwrapper")},f),h={prev:X(Ja,{disabled:e.disabled,currentPage:b.value,prevText:e.prevText,prevIcon:e.prevIcon,onClick:F}),jumper:X(lt,{size:k.value}),pager:X(ft,{currentPage:b.value,pageCount:V.value,pagerCount:e.pagerCount,onChange:W,disabled:e.disabled}),next:X(Ya,{disabled:e.disabled,currentPage:b.value,pageCount:V.value,nextText:e.nextText,nextIcon:e.nextIcon,onClick:U}),sizes:X(tt,{pageSize:G.value,pageSizes:e.pageSizes,popperClass:e.popperClass,disabled:e.disabled,teleported:e.teleported,size:k.value,appendSizeTo:e.appendSizeTo}),slot:(t=(a=o==null?void 0:o.default)==null?void 0:a.call(o))!=null?t:null,total:X(ct,{total:L(e.total)?0:e.total})},B=e.layout.split(",").map($=>$.trim());let T=!1;return B.forEach($=>{if($==="->"){T=!0;return}T?f.push(h[$]):g.push(h[$])}),n(g[0],r.is("first")),n(g[g.length-1],r.is("last")),T&&f.length>0&&(n(f[0],r.is("first")),n(f[f.length-1],r.is("last")),g.push(z)),X("div",{class:[r.b(),r.is("background",e.background),r.m(k.value)]},g)}}});const ht=ra(bt),he="_trap-focus-children",x=[],je=e=>{if(x.length===0)return;const l=x[x.length-1][he];if(l.length>0&&e.code===ua.tab){if(l.length===1){e.preventDefault(),document.activeElement!==l[0]&&l[0].focus();return}const o=e.shiftKey,p=e.target===l[0],r=e.target===l[l.length-1];p&&o&&(e.preventDefault(),l[l.length-1].focus()),r&&!o&&(e.preventDefault(),l[0].focus())}},yt={beforeMount(e){e[he]=_e(e),x.push(e),x.length<=1&&document.addEventListener("keydown",je)},updated(e){ie(()=>{e[he]=_e(e)})},unmounted(){x.shift(),x.length===0&&document.removeEventListener("keydown",je)}},Ct=R({name:"ElMessageBox",directives:{TrapFocus:yt},components:{ElButton:Fe,ElFocusTrap:va,ElInput:Pe,ElOverlay:fa,ElIcon:ge,...ga},inheritAttrs:!1,props:{buttonSize:{type:String,validator:pa},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:Boolean,container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:l}){const{locale:o,zIndex:p,ns:r,size:u}=ma("message-box",I(()=>e.buttonSize)),{t:m}=o,{nextZIndex:k}=p,P=w(!1),s=ba({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:me(Be),cancelButtonLoadingIcon:me(Be),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:k()}),S=I(()=>{const _=s.type;return{[r.bm("icon",_)]:_&&Me[_]}}),c=Te(),A=Te(),G=I(()=>{const _=s.type;return s.icon||_&&Me[_]||""}),V=I(()=>!!s.message),b=w(),W=w(),D=w(),F=w(),U=w(),n=I(()=>s.confirmButtonClass);Q(()=>s.inputValue,async _=>{await ie(),e.boxType==="prompt"&&_&&$()},{immediate:!0}),Q(()=>P.value,_=>{var q,K;_&&(e.boxType!=="prompt"&&(s.autofocus?D.value=(K=(q=U.value)==null?void 0:q.$el)!=null?K:b.value:D.value=b.value),s.zIndex=k()),e.boxType==="prompt"&&(_?ie().then(()=>{var we;F.value&&F.value.$el&&(s.autofocus?D.value=(we=He())!=null?we:b.value:D.value=b.value)}):(s.editorErrorMessage="",s.validateError=!1))});const a=I(()=>e.draggable),t=I(()=>e.overflow),{isDragging:g}=ha(b,W,a,t);Oe(async()=>{await ie(),e.closeOnHashChange&&window.addEventListener("hashchange",f)}),ya(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",f)});function f(){P.value&&(P.value=!1,ie(()=>{s.action&&l("action",s.action)}))}const z=()=>{e.closeOnClickModal&&T(s.distinguishCancelAndClose?"close":"cancel")},h=Pa(z),B=_=>{if(s.inputType!=="textarea")return _.preventDefault(),T("confirm")},T=_=>{var q;e.boxType==="prompt"&&_==="confirm"&&!$()||(s.action=_,s.beforeClose?(q=s.beforeClose)==null||q.call(s,_,s,f):f())},$=()=>{if(e.boxType==="prompt"){const _=s.inputPattern;if(_&&!_.test(s.inputValue||""))return s.editorErrorMessage=s.inputErrorMessage||m("el.messagebox.error"),s.validateError=!0,!1;const q=s.inputValidator;if(be(q)){const K=q(s.inputValue);if(K===!1)return s.editorErrorMessage=s.inputErrorMessage||m("el.messagebox.error"),s.validateError=!0,!1;if(ke(K))return s.editorErrorMessage=K,s.validateError=!0,!1}}return s.editorErrorMessage="",s.validateError=!1,!0},He=()=>{var _,q;const K=(_=F.value)==null?void 0:_.$refs;return(q=K==null?void 0:K.input)!=null?q:K==null?void 0:K.textarea},ze=()=>{T("close")},Ge=()=>{e.closeOnPressEscape&&ze()};return e.lockScroll&&Ca(P),{...ka(s),ns:r,overlayEvent:h,visible:P,hasMessage:V,typeClass:S,contentId:c,inputId:A,btnSize:u,iconComponent:G,confirmButtonClasses:n,rootRef:b,focusStartRef:D,headerRef:W,inputRef:F,isDragging:g,confirmRef:U,doClose:f,handleClose:ze,onCloseRequested:Ge,handleWrapperClick:z,handleInputEnter:B,handleAction:T,t:m}}});function Pt(e,l,o,p,r,u){const m=oe("el-icon"),k=oe("el-input"),P=oe("el-button"),s=oe("el-focus-trap"),S=oe("el-overlay");return d(),N(da,{name:"fade-in-linear",onAfterLeave:c=>e.$emit("vanish"),persisted:""},{default:M(()=>[fe(y(S,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:M(()=>[v("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:C(`${e.ns.namespace.value}-overlay-message-box`),onClick:e.overlayEvent.onClick,onMousedown:e.overlayEvent.onMousedown,onMouseup:e.overlayEvent.onMouseup},[y(s,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:M(()=>[v("div",{ref:"rootRef",class:C([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),e.ns.is("dragging",e.isDragging),{[e.ns.m("center")]:e.center}]),style:Ie(e.customStyle),tabindex:"-1",onClick:ue(()=>{},["stop"])},[e.title!==null&&e.title!==void 0?(d(),E("div",{key:0,ref:"headerRef",class:C([e.ns.e("header"),{"show-close":e.showClose}])},[v("div",{class:C(e.ns.e("title"))},[e.iconComponent&&e.center?(d(),N(m,{key:0,class:C([e.ns.e("status"),e.typeClass])},{default:M(()=>[(d(),N(Y(e.iconComponent)))]),_:1},8,["class"])):H("v-if",!0),v("span",null,O(e.title),1)],2),e.showClose?(d(),E("button",{key:0,type:"button",class:C(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:c=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),onKeydown:le(ue(c=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"])},[y(m,{class:C(e.ns.e("close"))},{default:M(()=>[(d(),N(Y(e.closeIcon||"close")))]),_:1},8,["class"])],42,["aria-label","onClick","onKeydown"])):H("v-if",!0)],2)):H("v-if",!0),v("div",{id:e.contentId,class:C(e.ns.e("content"))},[v("div",{class:C(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(d(),N(m,{key:0,class:C([e.ns.e("status"),e.typeClass])},{default:M(()=>[(d(),N(Y(e.iconComponent)))]),_:1},8,["class"])):H("v-if",!0),e.hasMessage?(d(),E("div",{key:1,class:C(e.ns.e("message"))},[ca(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(d(),N(Y(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(d(),N(Y(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0,textContent:O(e.message)},null,8,["for","textContent"]))])],2)):H("v-if",!0)],2),fe(v("div",{class:C(e.ns.e("input"))},[y(k,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":c=>e.inputValue=c,type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:C({invalid:e.validateError}),onKeydown:le(e.handleInputEnter,["enter"])},null,8,["id","modelValue","onUpdate:modelValue","type","placeholder","aria-invalid","class","onKeydown"]),v("div",{class:C(e.ns.e("errormsg")),style:Ie({visibility:e.editorErrorMessage?"visible":"hidden"})},O(e.editorErrorMessage),7)],2),[[ve,e.showInput]])],10,["id"]),v("div",{class:C(e.ns.e("btns"))},[e.showCancelButton?(d(),N(P,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:C([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:c=>e.handleAction("cancel"),onKeydown:le(ue(c=>e.handleAction("cancel"),["prevent"]),["enter"])},{default:M(()=>[pe(O(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size","onClick","onKeydown"])):H("v-if",!0),fe(y(P,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:C([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:c=>e.handleAction("confirm"),onKeydown:le(ue(c=>e.handleAction("confirm"),["prevent"]),["enter"])},{default:M(()=>[pe(O(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size","onClick","onKeydown"]),[[ve,e.showConfirmButton]])],2)],14,["onClick"])]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,["aria-label","aria-describedby","onClick","onMousedown","onMouseup"])]),_:3},8,["z-index","overlay-class","mask"]),[[ve,e.visible]])]),_:3},8,["onAfterLeave"])}var kt=ae(Ct,[["render",Pt],["__file","index.vue"]]);const re=new Map,St=e=>{let l=document.body;return e.appendTo&&(ke(e.appendTo)&&(l=document.querySelector(e.appendTo)),$e(e.appendTo)&&(l=e.appendTo),$e(l)||(l=document.body)),l},zt=(e,l,o=null)=>{const p=y(kt,e,be(e.message)||De(e.message)?{default:be(e.message)?e.message:()=>e.message}:null);return p.appContext=o,Ue(p,l),St(e).appendChild(l.firstElementChild),p.component},wt=()=>document.createElement("div"),Et=(e,l)=>{const o=wt();e.onVanish=()=>{Ue(null,o),re.delete(r)},e.onAction=u=>{const m=re.get(r);let k;e.showInput?k={value:r.inputValue,action:u}:k=u,e.callback?e.callback(k,p.proxy):u==="cancel"||u==="close"?e.distinguishCancelAndClose&&u!=="cancel"?m.reject("close"):m.reject("cancel"):m.resolve(k)};const p=zt(e,o,l),r=p.proxy;for(const u in e)Ne(e,u)&&!Ne(r.$props,u)&&(u==="closeIcon"&&qe(e[u])?r[u]=me(e[u]):r[u]=e[u]);return r.visible=!0,r};function se(e,l=null){if(!Sa)return Promise.reject();let o;return ke(e)||De(e)?e={message:e}:o=e.callback,new Promise((p,r)=>{const u=Et(e,l??se._context);re.set(u,{options:e,callback:o,resolve:p,reject:r})})}const _t=["alert","confirm","prompt"],It={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};_t.forEach(e=>{se[e]=Bt(e)});function Bt(e){return(l,o,p,r)=>{let u="";return qe(o)?(p=o,u=""):za(o)?u="":u=o,se(Object.assign({title:u,message:l,type:"",...It[e]},p,{boxType:e}),r)}}se.close=()=>{re.forEach((e,l)=>{l.doClose()}),re.clear()};se._context=null;const Z=se;Z.install=e=>{Z._context=e._context,e.config.globalProperties.$msgbox=Z,e.config.globalProperties.$messageBox=Z,e.config.globalProperties.$alert=Z.alert,e.config.globalProperties.$confirm=Z.confirm,e.config.globalProperties.$prompt=Z.prompt};const Mt=Z,Tt={class:"projects-view-container"},Nt={class:"unified-header-section"},$t={class:"unified-header-content"},At={class:"title-section"},jt={class:"stats-grid"},Lt={class:"stat-card"},Rt={class:"stat-icon-wrapper risk-icon"},Vt={class:"stat-content"},Ft={class:"stat-card"},Ot={class:"stat-icon-wrapper project-icon"},Dt={class:"stat-content"},Ut={class:"stat-value"},qt={class:"stat-card"},Kt={class:"stat-icon-wrapper vuln-icon"},Ht={class:"stat-content"},Gt={class:"stat-value"},Wt={class:"content-section"},Jt={class:"section-header"},Xt={class:"section-title"},Zt={class:"section-actions"},Qt={class:"projects-content"},Yt={key:0,class:"loading-container"},xt={key:1,class:"projects-list"},en={key:0,class:"pagination-wrapper"},an={key:2,class:"empty-state"},tn=R({__name:"ProjectsInfo",setup(e){const l=w({tooltip:{trigger:"axis",axisPointer:{}},legend:{orient:"horizontal",bottom:"5%",left:"5%",itemGap:30},grid:{left:"3%",right:"3%",top:"10%",bottom:"20%",containLabel:!1,gap:"5%"},xAxis:{type:"value",show:!1,position:"bottom"},yAxis:{type:"category",data:["项目等级风险"],show:!1},series:[{name:"高风险",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[5],itemStyle:{borderRadius:5,color:"#9045ff"},barMaxWidth:45},{name:"低风险",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[1],itemStyle:{borderRadius:5,color:"#e3ebff"}},{name:"暂无风险",type:"bar",stack:"total",label:{show:!0},emphasis:{focus:"series"},data:[2],itemStyle:{borderRadius:5,color:"#336fff"},barCategoryGap:"30%"}]}),o=w(!1),p=n=>{const a=n.formData||n,t=n.projectInfo||n;console.log("上传项目信息：",t),Oa(a).then(g=>{if(console.log("上传响应：",g),g.code===200){const f=g.obj.projectId;j.success("项目上传成功，正在自动分析..."),r(f),o.value=!1}else j.error("项目上传失败: "+g.message),o.value=!1}).catch(g=>{console.error("上传失败：",g),j.error("项目上传失败，请检查网络或文件格式"),o.value=!1})};function r(n){let a=0;const t=90,f=setInterval(async()=>{if(a>=t){clearInterval(f),j.warning("分析超时，请稍后在项目详情页查看");return}try{const z=await Da(n);if(z.code===200){const h=z.obj;if(console.log(`[分析进度] 项目${n}: ${h.status}，语言: ${h.language}`),h.status==="completed"){clearInterval(f),j.success({message:`✅ 分析完成
检测语言：${h.language}
组件数：${h.componentCount}
漏洞数：${h.vulnerabilityCount}
风险等级：${h.riskLevel}`,duration:5e3}),F(1);return}if(h.status==="failed"){clearInterval(f),j.error(`❌ 分析失败：${h.message||"未知原因"}`),F(1);return}h.status==="analyzing"&&console.log(`[进度] 项目${n}分析中...`)}}catch(z){console.error("查询分析状态失败：",z)}a++},2e3)}const u=n=>{console.log(n);const a=new FormData;a.append("id",n.id.toString()),a.append("name",n.name),a.append("description",n.description),a.append("riskThreshold",n.risk_threshold.toString()),n.filePath&&a.append("filePath",n.filePath),Ua(a).then(t=>{console.log(t),t.code===200?(j({message:"成功更新",type:"success"}),F(1)):j({message:"更新失败: "+t.message+" "+t.obj,type:"error"})}).catch(t=>{console.log(t),j.error("更新失败")})},m=n=>{Mt.confirm("您确定要删除该项目吗?",{confirmButtonText:"确认",cancelButtonText:"取消"}).then(()=>{console.log(n);const a=new FormData;a.append("id",n.id.toString()),qa(a).then(t=>{console.log(t),t.code===200?(j({message:"成功删除",type:"success"}),F(1)):j({message:"删除失败: "+t.message+" "+t.obj,type:"error"})}).catch(t=>{console.log(t),j.error("删除失败")})}).catch(()=>{j({type:"info",message:"已取消删除"})})},k=w(!0),P=w([]),s=w(""),S=w([]),c=w(1),A=w(10),G=w(0),V=I(()=>{const n=(c.value-1)*A.value,a=n+A.value;return S.value.slice(n,a)}),b=()=>{console.log("1projectInfos.value",P.value),console.log("1filtered",S.value),(s.value??"")===""?S.value=P.value:S.value=P.value.filter(n=>{var a;if((a=n.name)!=null&&a.includes(s.value??""))return!0}),c.value=1,console.log("projectInfos.value",P.value),console.log("filtered",S.value)},W=n=>{A.value=n,c.value=1},D=n=>{c.value=n};Q(s,b);async function F(n,a){k.value=!0;const t=c.value;A.value,n=1,t===1&&(P.value=[],await Va(1,1e3,n).then(g=>{const f=g;if(f.code!==200){j.error("获取项目列表失败"),console.error(f);return}const z=f.obj.map(h=>({id:h.id,description:h.description||"",name:h.name||"",risk_level:h.risk_level||"暂无风险",risk_threshold:h.risk_threshold?parseInt(h.risk_threshold,10):0,language:"java",companyId:n,filePath:null}));P.value=z,G.value=z.length,S.value=z}).catch(g=>{console.log(g),j.error("获取项目列表失败")})),k.value=!1}const U=w();return Oe(async()=>{await F(1),b(),La().then(a=>{const t=a.obj;console.log("statistics:",t),U.value=t;const g=[{name:"高风险",type:"bar",stack:"total",label:{show:t.highRiskNum!=0},emphasis:{focus:"series"},data:[t.highRiskNum],itemStyle:{borderRadius:5,color:"#9045ff"},barMaxWidth:45,barMaxHeight:30},{name:"低风险",type:"bar",stack:"total",label:{show:t.lowRiskNum!=0},emphasis:{focus:"series"},data:[t.lowRiskNum],itemStyle:{borderRadius:5,color:"#2967ff"},barMinHeight:5},{name:"暂无风险",type:"bar",stack:"total",label:{show:t.noRiskNum!=0},emphasis:{focus:"series"},data:[t.noRiskNum],itemStyle:{borderRadius:5,color:"#1c9a00"},barCategoryGap:"30%",barMinHeight:50}];l.value={...l.value,series:g}})}),(n,a)=>{var B,T;const t=ge,g=Pe,f=Fe,z=ht,h=_a;return d(),E("div",Tt,[v("div",Nt,[v("div",$t,[v("div",At,[y(t,{color:"#336FFF",size:"28",class:"title-icon"},{default:M(()=>[y(i(Ia))]),_:1}),a[6]||(a[6]=v("div",{class:"title-text"},[v("h1",{class:"page-title"},"项目管理"),v("p",{class:"page-subtitle"},"管理和监控您的项目安全状态")],-1))]),v("div",jt,[v("div",Lt,[v("div",Rt,[y(t,{size:24},{default:M(()=>[y(i(Ba))]),_:1})]),v("div",Vt,[a[7]||(a[7]=v("div",{class:"stat-label"},"项目风险分布",-1)),y(wa,{width:"100%",height:"120px",option:l.value},null,8,["option"])])]),v("div",Ft,[v("div",Ot,[y(t,{size:24},{default:M(()=>[y(i(Ma))]),_:1})]),v("div",Dt,[a[8]||(a[8]=v("div",{class:"stat-label"},"已上传项目",-1)),v("div",Ut,O(((B=U.value)==null?void 0:B.projectNum)||0),1)])]),v("div",qt,[v("div",Kt,[y(t,{size:24},{default:M(()=>[y(i(Ta))]),_:1})]),v("div",Ht,[a[9]||(a[9]=v("div",{class:"stat-label"},"发现漏洞数",-1)),v("div",Gt,O(((T=U.value)==null?void 0:T.vulnerabilityNum)||0),1)])])])])]),v("div",Wt,[v("div",Jt,[v("h2",Xt,[y(t,{class:"section-icon"},{default:M(()=>[y(i(Na))]),_:1}),a[10]||(a[10]=pe(" 项目仓库 "))]),v("div",Zt,[y(g,{modelValue:s.value,"onUpdate:modelValue":a[0]||(a[0]=$=>s.value=$),placeholder:"搜索项目名称...",class:"search-input",clearable:""},{prefix:M(()=>[y(t,{class:"search-icon"},{default:M(()=>[y(i($a))]),_:1})]),_:1},8,["modelValue"]),y(f,{type:"primary",class:"add-project-btn",onClick:a[1]||(a[1]=$=>o.value=!0)},{default:M(()=>[y(t,{class:"btn-icon"},{default:M(()=>[y(i(Aa))]),_:1}),a[11]||(a[11]=pe(" 新建项目 "))]),_:1})])]),v("div",Qt,[k.value?(d(),E("div",Yt,[y(Ea,{size:"large"})])):S.value.length>0?(d(),E("div",xt,[(d(!0),E(ye,null,Ce(V.value,$=>(d(),N(Fa,{key:$.id,project:$,onDelete:m,onEdit:u,onEditFile:u},null,8,["project"]))),128)),S.value.length>A.value?(d(),E("div",en,[y(z,{"current-page":c.value,"onUpdate:currentPage":a[2]||(a[2]=$=>c.value=$),"page-size":A.value,"onUpdate:pageSize":a[3]||(a[3]=$=>A.value=$),"page-sizes":[10,20,50],small:!1,disabled:k.value,background:!0,layout:"total, sizes, prev, pager, next, jumper",total:S.value.length,onSizeChange:W,onCurrentChange:D},null,8,["current-page","page-size","disabled","total"])])):H("",!0)])):(d(),E("div",an,[y(h,{description:"暂无项目","image-size":120})]))])]),y(Ra,{type:"add",visible:o.value,onCancel:a[4]||(a[4]=()=>o.value=!1),onConfirm:p,onClose:a[5]||(a[5]=()=>o.value=!1)},null,8,["visible"])])}}}),rn=ja(tn,[["__scopeId","data-v-53fffcde"]]);export{rn as default};
