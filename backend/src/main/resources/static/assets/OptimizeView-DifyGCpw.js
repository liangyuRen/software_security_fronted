import{K as ge,z as ve,b as we,C as ze,ca as Le,bN as he,bO as Ye,j as me,bQ as $e,R as Me,g as Oe,l as z,c as _,n as Z,cb as be,c0 as Ee,V as pe,X as J,_ as Ie,d as G,k as Te,ab as Re,an as Se,a as w,o as y,p as T,w as Y,A as i,x as U,f as l,t as q,bE as Fe,a0 as re,ak as Pe,Q as je,bS as Ae,bw as qe,bc as Ge,P as Be,ah as Ke,u as He,bT as Qe,b9 as Je,O as Ze,e as D,D as O,F as A,q as ue,$ as De,U as et,bC as Ce,aG as Ve,c8 as tt,a3 as fe,a9 as lt,bJ as Ue,E as at,cc as nt,cd as st,ce as ot,aI as it,cf as rt,ay as ut}from"./index-GjuQlPlU.js";import{E as We}from"./el-input-number-Bt7L98Zh.js";import"./index-D72j5SSo.js";const Xe=Symbol("sliderContextKey"),dt=we({modelValue:{type:me([Number,Array]),default:0},id:{type:String,default:void 0},min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},showInput:Boolean,showInputControls:{type:Boolean,default:!0},size:Me,inputSize:Me,showStops:Boolean,showTooltip:{type:Boolean,default:!0},formatTooltip:{type:me(Function),default:void 0},disabled:Boolean,range:Boolean,vertical:Boolean,height:String,debounce:{type:Number,default:300},rangeStartLabel:{type:String,default:void 0},rangeEndLabel:{type:String,default:void 0},formatValueText:{type:me(Function),default:void 0},tooltipClass:{type:String,default:void 0},placement:{type:String,values:$e,default:"top"},marks:{type:me(Object)},validateEvent:{type:Boolean,default:!0},persistent:{type:Boolean,default:!0},...Ye(["ariaLabel"])}),_e=e=>ge(e)||ve(e)&&e.every(ge),ct={[he]:_e,[Le]:_e,[ze]:_e},mt=we({modelValue:{type:Number,default:0},vertical:Boolean,tooltipClass:String,placement:{type:String,values:$e,default:"top"}}),vt={[he]:e=>ge(e)},ft=(e,t,r)=>{const a=z(),s=z(!1),d=_(()=>t.value instanceof Function),o=_(()=>d.value&&t.value(e.modelValue)||e.modelValue),V=Ee(()=>{r.value&&(s.value=!0)},50),m=Ee(()=>{r.value&&(s.value=!1)},50);return{tooltip:a,tooltipVisible:s,formatValue:o,displayTooltip:V,hideTooltip:m}},gt=(e,t,r)=>{const{disabled:a,min:s,max:d,step:o,showTooltip:V,persistent:m,precision:u,sliderSize:f,formatTooltip:n,emitChange:c,resetSize:b,updateDragging:k}=Oe(Xe),{tooltip:$,tooltipVisible:B,formatValue:I,displayTooltip:p,hideTooltip:C}=ft(e,n,V),N=z(),x=_(()=>`${(e.modelValue-s.value)/(d.value-s.value)*100}%`),K=_(()=>e.vertical?{bottom:x.value}:{left:x.value}),ee=()=>{t.hovering=!0,p()},ye=()=>{t.hovering=!1,t.dragging||C()},te=g=>{a.value||(g.preventDefault(),j(g),window.addEventListener("mousemove",R),window.addEventListener("touchmove",R),window.addEventListener("mouseup",F),window.addEventListener("touchend",F),window.addEventListener("contextmenu",F),N.value.focus())},H=g=>{a.value||(t.newPosition=Number.parseFloat(x.value)+g/(d.value-s.value)*100,W(t.newPosition),c())},le=()=>{H(-o.value)},v=()=>{H(o.value)},L=()=>{H(-o.value*4)},E=()=>{H(o.value*4)},se=()=>{a.value||(W(0),c())},oe=()=>{a.value||(W(100),c())},ie=g=>{let S=!0;switch(g.code){case J.left:case J.down:le();break;case J.right:case J.up:v();break;case J.home:se();break;case J.end:oe();break;case J.pageDown:L();break;case J.pageUp:E();break;default:S=!1;break}S&&g.preventDefault()},ae=g=>{let S,X;return g.type.startsWith("touch")?(X=g.touches[0].clientY,S=g.touches[0].clientX):(X=g.clientY,S=g.clientX),{clientX:S,clientY:X}},j=g=>{t.dragging=!0,t.isClick=!0;const{clientX:S,clientY:X}=ae(g);e.vertical?t.startY=X:t.startX=S,t.startPosition=Number.parseFloat(x.value),t.newPosition=t.startPosition},R=g=>{if(t.dragging){t.isClick=!1,p(),b();let S;const{clientX:X,clientY:Q}=ae(g);e.vertical?(t.currentY=Q,S=(t.startY-t.currentY)/f.value*100):(t.currentX=X,S=(t.currentX-t.startX)/f.value*100),t.newPosition=t.startPosition+S,W(t.newPosition)}},F=()=>{t.dragging&&(setTimeout(()=>{t.dragging=!1,t.hovering||C(),t.isClick||W(t.newPosition),c()},0),window.removeEventListener("mousemove",R),window.removeEventListener("touchmove",R),window.removeEventListener("mouseup",F),window.removeEventListener("touchend",F),window.removeEventListener("contextmenu",F))},W=async g=>{if(g===null||Number.isNaN(+g))return;g<0?g=0:g>100&&(g=100);const S=100/((d.value-s.value)/o.value);let Q=Math.round(g/S)*S*(d.value-s.value)*.01+s.value;Q=Number.parseFloat(Q.toFixed(u.value)),Q!==e.modelValue&&r(he,Q),!t.dragging&&e.modelValue!==t.oldValue&&(t.oldValue=e.modelValue),await pe(),t.dragging&&p(),$.value.updatePopper()};return Z(()=>t.dragging,g=>{k(g)}),be(N,"touchstart",te,{passive:!1}),{disabled:a,button:N,tooltip:$,tooltipVisible:B,showTooltip:V,persistent:m,wrapperStyle:K,formatValue:I,handleMouseEnter:ee,handleMouseLeave:ye,onButtonDown:te,onKeyDown:ie,setPosition:W}},ht=G({name:"ElSliderButton"}),yt=G({...ht,props:mt,emits:vt,setup(e,{expose:t,emit:r}){const a=e,s=Te("slider"),d=Re({hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:0,oldValue:a.modelValue}),o=_(()=>f.value?n.value:!1),{disabled:V,button:m,tooltip:u,showTooltip:f,persistent:n,tooltipVisible:c,wrapperStyle:b,formatValue:k,handleMouseEnter:$,handleMouseLeave:B,onButtonDown:I,onKeyDown:p,setPosition:C}=gt(a,d,r),{hovering:N,dragging:x}=Se(d);return t({onButtonDown:I,onKeyDown:p,setPosition:C,hovering:N,dragging:x}),(K,ee)=>(y(),w("div",{ref_key:"button",ref:m,class:U([l(s).e("button-wrapper"),{hover:l(N),dragging:l(x)}]),style:re(l(b)),tabindex:l(V)?-1:0,onMouseenter:l($),onMouseleave:l(B),onMousedown:l(I),onFocus:l($),onBlur:l(B),onKeydown:l(p)},[T(l(Fe),{ref_key:"tooltip",ref:u,visible:l(c),placement:K.placement,"fallback-placements":["top","bottom","right","left"],"stop-popper-mouse-event":!1,"popper-class":K.tooltipClass,disabled:!l(f),persistent:l(o)},{content:Y(()=>[i("span",null,q(l(k)),1)]),default:Y(()=>[i("div",{class:U([l(s).e("button"),{hover:l(N),dragging:l(x)}])},null,2)]),_:1},8,["visible","placement","popper-class","disabled","persistent"])],46,["tabindex","onMouseenter","onMouseleave","onMousedown","onFocus","onBlur","onKeydown"]))}});var xe=Ie(yt,[["__file","button.vue"]]);const bt=we({mark:{type:me([String,Object]),default:void 0}});var pt=G({name:"ElSliderMarker",props:bt,setup(e){const t=Te("slider"),r=_(()=>Pe(e.mark)?e.mark:e.mark.label),a=_(()=>Pe(e.mark)?void 0:e.mark.style);return()=>je("div",{class:t.e("marks-text"),style:a.value},r.value)}});const Vt=(e,t,r)=>{const{form:a,formItem:s}=Ae(),d=qe(),o=z(),V=z(),m={firstButton:o,secondButton:V},u=_(()=>e.disabled||(a==null?void 0:a.disabled)||!1),f=_(()=>Math.min(t.firstValue,t.secondValue)),n=_(()=>Math.max(t.firstValue,t.secondValue)),c=_(()=>e.range?`${100*(n.value-f.value)/(e.max-e.min)}%`:`${100*(t.firstValue-e.min)/(e.max-e.min)}%`),b=_(()=>e.range?`${100*(f.value-e.min)/(e.max-e.min)}%`:"0%"),k=_(()=>e.vertical?{height:e.height}:{}),$=_(()=>e.vertical?{height:c.value,bottom:b.value}:{width:c.value,left:b.value}),B=()=>{if(d.value){const v=d.value.getBoundingClientRect();t.sliderSize=v[e.vertical?"height":"width"]}},I=v=>{const L=e.min+v*(e.max-e.min)/100;if(!e.range)return o;let E;return Math.abs(f.value-L)<Math.abs(n.value-L)?E=t.firstValue<t.secondValue?"firstButton":"secondButton":E=t.firstValue>t.secondValue?"firstButton":"secondButton",m[E]},p=v=>{const L=I(v);return L.value.setPosition(v),L},C=v=>{t.firstValue=v??e.min,x(e.range?[f.value,n.value]:v??e.min)},N=v=>{t.secondValue=v,e.range&&x([f.value,n.value])},x=v=>{r(he,v),r(Le,v)},K=async()=>{await pe(),r(ze,e.range?[f.value,n.value]:e.modelValue)},ee=v=>{var L,E,se,oe,ie,ae;if(u.value||t.dragging)return;B();let j=0;if(e.vertical){const R=(se=(E=(L=v.touches)==null?void 0:L.item(0))==null?void 0:E.clientY)!=null?se:v.clientY;j=(d.value.getBoundingClientRect().bottom-R)/t.sliderSize*100}else{const R=(ae=(ie=(oe=v.touches)==null?void 0:oe.item(0))==null?void 0:ie.clientX)!=null?ae:v.clientX,F=d.value.getBoundingClientRect().left;j=(R-F)/t.sliderSize*100}if(!(j<0||j>100))return p(j)};return{elFormItem:s,slider:d,firstButton:o,secondButton:V,sliderDisabled:u,minValue:f,maxValue:n,runwayStyle:k,barStyle:$,resetSize:B,setPosition:p,emitChange:K,onSliderWrapperPrevent:v=>{var L,E;((L=m.firstButton.value)!=null&&L.dragging||(E=m.secondButton.value)!=null&&E.dragging)&&v.preventDefault()},onSliderClick:v=>{ee(v)&&K()},onSliderDown:async v=>{const L=ee(v);L&&(await pe(),L.value.onButtonDown(v))},onSliderMarkerDown:v=>{if(u.value||t.dragging)return;p(v)&&K()},setFirstValue:C,setSecondValue:N}},_t=(e,t,r,a)=>({stops:_(()=>{if(!e.showStops||e.min>e.max)return[];if(e.step===0)return[];const o=(e.max-e.min)/e.step,V=100*e.step/(e.max-e.min),m=Array.from({length:o-1}).map((u,f)=>(f+1)*V);return e.range?m.filter(u=>u<100*(r.value-e.min)/(e.max-e.min)||u>100*(a.value-e.min)/(e.max-e.min)):m.filter(u=>u>100*(t.firstValue-e.min)/(e.max-e.min))}),getStopStyle:o=>e.vertical?{bottom:`${o}%`}:{left:`${o}%`}}),St=e=>_(()=>e.marks?Object.keys(e.marks).map(Number.parseFloat).sort((r,a)=>r-a).filter(r=>r<=e.max&&r>=e.min).map(r=>({point:r,position:(r-e.min)*100/(e.max-e.min),mark:e.marks[r]})):[]),wt=(e,t,r,a,s,d)=>{const o=u=>{s(he,u),s(Le,u)},V=()=>e.range?![r.value,a.value].every((u,f)=>u===t.oldValue[f]):e.modelValue!==t.oldValue,m=()=>{var u,f;e.min>e.max&&Ge("Slider","min should not be greater than max.");const n=e.modelValue;e.range&&ve(n)?n[1]<e.min?o([e.min,e.min]):n[0]>e.max?o([e.max,e.max]):n[0]<e.min?o([e.min,n[1]]):n[1]>e.max?o([n[0],e.max]):(t.firstValue=n[0],t.secondValue=n[1],V()&&(e.validateEvent&&((u=d==null?void 0:d.validate)==null||u.call(d,"change").catch(c=>Be())),t.oldValue=n.slice())):!e.range&&ge(n)&&!Number.isNaN(n)&&(n<e.min?o(e.min):n>e.max?o(e.max):(t.firstValue=n,V()&&(e.validateEvent&&((f=d==null?void 0:d.validate)==null||f.call(d,"change").catch(c=>Be())),t.oldValue=n)))};m(),Z(()=>t.dragging,u=>{u||m()}),Z(()=>e.modelValue,(u,f)=>{t.dragging||ve(u)&&ve(f)&&u.every((n,c)=>n===f[c])&&t.firstValue===u[0]&&t.secondValue===u[1]||m()},{deep:!0}),Z(()=>[e.min,e.max],()=>{m()})},Lt=(e,t,r)=>{const a=z();return Ke(async()=>{e.range?(ve(e.modelValue)?(t.firstValue=Math.max(e.min,e.modelValue[0]),t.secondValue=Math.min(e.max,e.modelValue[1])):(t.firstValue=e.min,t.secondValue=e.max),t.oldValue=[t.firstValue,t.secondValue]):(!ge(e.modelValue)||Number.isNaN(e.modelValue)?t.firstValue=e.min:t.firstValue=Math.min(e.max,Math.max(e.min,e.modelValue)),t.oldValue=t.firstValue),be(window,"resize",r),await pe(),r()}),{sliderWrapper:a}},Tt=G({name:"ElSlider"}),kt=G({...Tt,props:dt,emits:ct,setup(e,{expose:t,emit:r}){const a=e,s=Te("slider"),{t:d}=He(),o=Re({firstValue:0,secondValue:0,oldValue:0,dragging:!1,sliderSize:1}),{elFormItem:V,slider:m,firstButton:u,secondButton:f,sliderDisabled:n,minValue:c,maxValue:b,runwayStyle:k,barStyle:$,resetSize:B,emitChange:I,onSliderWrapperPrevent:p,onSliderClick:C,onSliderDown:N,onSliderMarkerDown:x,setFirstValue:K,setSecondValue:ee}=Vt(a,o,r),{stops:ye,getStopStyle:te}=_t(a,o,c,b),{inputId:H,isLabeledByFormItem:le}=Qe(a,{formItemContext:V}),v=Je(),L=_(()=>a.inputSize||v.value),E=_(()=>a.ariaLabel||d("el.slider.defaultLabel",{min:a.min,max:a.max})),se=_(()=>a.range?a.rangeStartLabel||d("el.slider.defaultRangeStartLabel"):E.value),oe=_(()=>a.formatValueText?a.formatValueText(g.value):`${g.value}`),ie=_(()=>a.rangeEndLabel||d("el.slider.defaultRangeEndLabel")),ae=_(()=>a.formatValueText?a.formatValueText(S.value):`${S.value}`),j=_(()=>[s.b(),s.m(v.value),s.is("vertical",a.vertical),{[s.m("with-input")]:a.showInput}]),R=St(a);wt(a,o,c,b,r,V);const F=_(()=>{const h=[a.min,a.max,a.step].map(ke=>{const de=`${ke}`.split(".")[1];return de?de.length:0});return Math.max.apply(null,h)}),{sliderWrapper:W}=Lt(a,o,B),{firstValue:g,secondValue:S,sliderSize:X}=Se(o),Q=h=>{o.dragging=h};return be(W,"touchstart",p,{passive:!1}),be(W,"touchmove",p,{passive:!1}),Ze(Xe,{...Se(a),sliderSize:X,disabled:n,precision:F,emitChange:I,resetSize:B,updateDragging:Q}),t({onSliderClick:C}),(h,ke)=>{var de,Ne;return y(),w("div",{id:h.range?l(H):void 0,ref_key:"sliderWrapper",ref:W,class:U(l(j)),role:h.range?"group":void 0,"aria-label":h.range&&!l(le)?l(E):void 0,"aria-labelledby":h.range&&l(le)?(de=l(V))==null?void 0:de.labelId:void 0},[i("div",{ref_key:"slider",ref:m,class:U([l(s).e("runway"),{"show-input":h.showInput&&!h.range},l(s).is("disabled",l(n))]),style:re(l(k)),onMousedown:l(N),onTouchstartPassive:l(N)},[i("div",{class:U(l(s).e("bar")),style:re(l($))},null,6),T(xe,{id:h.range?void 0:l(H),ref_key:"firstButton",ref:u,"model-value":l(g),vertical:h.vertical,"tooltip-class":h.tooltipClass,placement:h.placement,role:"slider","aria-label":h.range||!l(le)?l(se):void 0,"aria-labelledby":!h.range&&l(le)?(Ne=l(V))==null?void 0:Ne.labelId:void 0,"aria-valuemin":h.min,"aria-valuemax":h.range?l(S):h.max,"aria-valuenow":l(g),"aria-valuetext":l(oe),"aria-orientation":h.vertical?"vertical":"horizontal","aria-disabled":l(n),"onUpdate:modelValue":l(K)},null,8,["id","model-value","vertical","tooltip-class","placement","aria-label","aria-labelledby","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"]),h.range?(y(),D(xe,{key:0,ref_key:"secondButton",ref:f,"model-value":l(S),vertical:h.vertical,"tooltip-class":h.tooltipClass,placement:h.placement,role:"slider","aria-label":l(ie),"aria-valuemin":l(g),"aria-valuemax":h.max,"aria-valuenow":l(S),"aria-valuetext":l(ae),"aria-orientation":h.vertical?"vertical":"horizontal","aria-disabled":l(n),"onUpdate:modelValue":l(ee)},null,8,["model-value","vertical","tooltip-class","placement","aria-label","aria-valuemin","aria-valuemax","aria-valuenow","aria-valuetext","aria-orientation","aria-disabled","onUpdate:modelValue"])):O("v-if",!0),h.showStops?(y(),w("div",{key:1},[(y(!0),w(A,null,ue(l(ye),(ne,ce)=>(y(),w("div",{key:ce,class:U(l(s).e("stop")),style:re(l(te)(ne))},null,6))),128))])):O("v-if",!0),l(R).length>0?(y(),w(A,{key:2},[i("div",null,[(y(!0),w(A,null,ue(l(R),(ne,ce)=>(y(),w("div",{key:ce,style:re(l(te)(ne.position)),class:U([l(s).e("stop"),l(s).e("marks-stop")])},null,6))),128))]),i("div",{class:U(l(s).e("marks"))},[(y(!0),w(A,null,ue(l(R),(ne,ce)=>(y(),D(l(pt),{key:ce,mark:ne.mark,style:re(l(te)(ne.position)),onMousedown:De(Ll=>l(x)(ne.position),["stop"])},null,8,["mark","style","onMousedown"]))),128))],2)],64)):O("v-if",!0)],46,["onMousedown","onTouchstartPassive"]),h.showInput&&!h.range?(y(),D(l(We),{key:0,ref:"input","model-value":l(g),class:U(l(s).e("input")),step:h.step,disabled:l(n),controls:h.showInputControls,min:h.min,max:h.max,precision:l(F),debounce:h.debounce,size:l(L),"onUpdate:modelValue":l(K),onChange:l(I)},null,8,["model-value","class","step","disabled","controls","min","max","precision","debounce","size","onUpdate:modelValue","onChange"])):O("v-if",!0)],10,["id","role","aria-label","aria-labelledby"])}}});var Nt=Ie(kt,[["__file","slider.vue"]]);const Mt=et(Nt),Et={class:"info"},Pt={class:"label"},Bt={class:"input"},Ct={class:"data"},xt={class:"text"},zt=G({__name:"EditableField",props:{label:String,modelValue:[Number,String],inputType:{type:String,default:"el-input-number"},inputProps:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{emit:t}){const r=e,a=t,s=z(!1),d=z(r.modelValue);Z(()=>r.modelValue,m=>{d.value=m});function o(){a("update:modelValue",d.value),s.value=!1}function V(){s.value=!1,d.value=r.modelValue}return(m,u)=>{const f=Mt,n=We;return y(),w("div",Et,[i("div",Pt,q(e.label),1),s.value?(y(),w(A,{key:0},[i("div",Bt,[e.inputType=="ElSlider"?(y(),D(f,Ce({key:0,modelValue:d.value,"onUpdate:modelValue":u[0]||(u[0]=c=>d.value=c)},e.inputProps),null,16,["modelValue"])):e.inputType=="ElInputNumber"?(y(),D(n,Ce({key:1,modelValue:d.value,"onUpdate:modelValue":u[1]||(u[1]=c=>d.value=c)},e.inputProps),null,16,["modelValue"])):O("",!0)]),i("div",{class:"text"},[i("span",{class:"edit",onClick:o},"确认修改"),i("span",{class:"cancel",onClick:V},"取消")])],64)):(y(),w(A,{key:1},[i("div",Ct,q(e.modelValue),1),i("div",xt,[i("span",{class:"edit",onClick:u[2]||(u[2]=c=>s.value=!0)},"修改")])],64))])}}}),$t=Ve(zt,[["__scopeId","data-v-21870ab5"]]),It={class:"data-setting"},Rt=G({__name:"DataSetting",props:{thresholdName:{default:"相似度阈值"},threshold:{},K:{}},emits:["update:threshold","update:K"],setup(e,{emit:t}){const r=e,a=z(r.threshold),s=z(r.K),d=t,o=m=>{a.value=m,d("update:threshold",m)},V=m=>{s.value=m,d("update:K",m)};return Z(()=>r.threshold,m=>{a.value=m}),Z(()=>r.K,m=>{s.value=m}),(m,u)=>{const f=$t;return y(),w("div",It,[T(f,{label:m.thresholdName,modelValue:a.value,"onUpdate:modelValue":[u[0]||(u[0]=n=>a.value=n),o],inputType:"ElSlider",inputProps:{min:0,max:1,step:.05,showInput:!0}},null,8,["label","modelValue"]),T(f,{label:"单位漏洞报告中检测出漏洞库的最大数量",modelValue:s.value,"onUpdate:modelValue":[u[1]||(u[1]=n=>s.value=n),V],inputType:"ElInputNumber",inputProps:{min:1,max:128}},null,8,["modelValue"])])}}}),Ft=Ve(Rt,[["__scopeId","data-v-1da16a8d"]]),Kt={class:"llm-card"},Ut={class:"header"},Wt={class:"right"},Xt={key:0,class:"tag",style:{backgroundColor:"#E4FBE5",color:"#3EC01E"}},Yt={key:1,class:"tag vip-tag"},Ot={class:"text"},jt={class:"footer"},At={key:1,class:"no-vip"},qt=G({__name:"LlmInfo",props:{info:{},isChosen:{type:Boolean,default:!1},isVip:{type:Boolean,default:!1}},emits:["update:name"],setup(e,{emit:t}){const r=t;return(a,s)=>{const d=tt,o=lt;return y(),w("div",Kt,[i("div",Ut,[i("h4",null,q(a.info.llmName),1),i("div",Wt,[a.info.infoTag?(y(),w("div",Xt,q(a.info.infoTag),1)):O("",!0),a.info.needVip?(y(),w("div",Yt,"会员专享")):O("",!0),a.isChosen?(y(),D(d,{key:2,type:"primary"},{default:Y(()=>s[1]||(s[1]=[fe("已选择")])),_:1})):O("",!0)])]),i("div",Ot,q(a.info.desc),1),i("div",jt,[s[3]||(s[3]=i("div",{class:"data-info"},null,-1)),!a.info.needVip||a.info.needVip&&a.isVip?(y(),D(o,{key:0,class:"llm-button",type:"primary",onClick:s[0]||(s[0]=V=>r("update:name",a.info.llmName))},{default:Y(()=>s[2]||(s[2]=[fe(" 选用该模型 ")])),_:1})):O("",!0),a.info.needVip&&!a.isVip?(y(),w("div",At,"非会员无法使用")):O("",!0)])])}}}),Gt=Ve(qt,[["__scopeId","data-v-9c0d77a7"]]);var P=(e=>(e[e.PreTrain=0]="PreTrain",e[e.LLM=1]="LLM",e))(P||{}),M=(e=>(e[e.Similarity=0]="Similarity",e[e.WhiteList=1]="WhiteList",e[e.None=2]="None",e))(M||{});const Ht=e=>{const r={companyId:1,similarityThreshold:e.similarityThreshold,detect_strategy:e.detectStrategy,maxDetectNums:e.maxDetectNums};return Ue.post("/company/updateStrategy",r)},Qt=()=>Ue.get("/company/getStrategy",{params:{companyId:1}}),Jt={class:"optimize-view-container"},Zt={class:"unified-header-section"},Dt={class:"unified-header-content"},el={class:"title-section"},tl={class:"content-section"},ll={class:"section-header"},al={class:"section-title"},nl={class:"section-content"},sl={class:"content-section"},ol={class:"section-header"},il={class:"section-title"},rl={class:"section-content"},ul={class:"filter-container"},dl={class:"filter-line"},cl={class:"filter-list"},ml=["onClick"],vl={class:"filter-line"},fl={class:"filter-list"},gl=["onClick"],hl={class:"content-section"},yl={class:"section-header"},bl={class:"section-title"},pl={class:"model-info"},Vl={class:"model-count"},_l={class:"section-content"},Sl={class:"llm-list"},wl=G({__name:"OptimizeView",setup(e){const t=z({model:"all",optimize:"all"}),r=[{value:"all",label:"全部"},{value:P.PreTrain,label:"预训练模型"},{value:P.LLM,label:"大语言模型"}],a=[{value:"all",label:"全部"},{value:M.Similarity,label:"相似度算法优化器"},{value:M.WhiteList,label:"白名单优化器"},{value:M.None,label:"无"}],s=z([{llmName:"PreTrainModel",desc:"利用TF-IDF打分算法结合基于BERT-FNN的PreTrainModel方法进行检测，能够高效识别常见漏洞。",accuracy:.75,falseRate:.03,modelType:P.PreTrain,optimizeType:M.None},{llmName:"LLM",desc:"在PreTrainModel的识别基础上，使用大语言模型（LLM）进行漏洞检测，具有强大的漏洞检测能力。",accuracy:.85,falseRate:.01,modelType:P.LLM,optimizeType:M.None},{llmName:"LLM-lev",desc:"在LLM基础上结合Levenshtein距离相似度匹配算法，与您的企业白名单进行匹配，提升准确率。",accuracy:.9,falseRate:.015,modelType:P.LLM,optimizeType:M.Similarity},{llmName:"PreTrainModel-lev",desc:"在PreTrainModel基础上结合Levenshtein距离相似度匹配算法，与您的企业白名单进行匹配，提升准确率。",accuracy:.82,falseRate:.025,modelType:P.PreTrain,optimizeType:M.Similarity},{llmName:"LLM-cos",desc:"在LLM基础上结合余弦相似度匹配算法，与您的企业白名单进行匹配，提升准确率。",accuracy:.88,falseRate:.018,infoTag:"误报率较低",modelType:P.LLM,optimizeType:M.Similarity},{llmName:"PreTrainModel-cos",desc:"在PreTrainModel基础上结合余弦相似度匹配算法，与您的企业白名单进行匹配，提升准确率。",accuracy:.8,falseRate:.02,infoTag:"误报率较低",modelType:P.PreTrain,optimizeType:M.Similarity},{llmName:"LLM-lcs",desc:"在LLM基础上结合最长公共子序列（LCS）算法，与您的企业白名单进行匹配，提升准确率。",accuracy:.87,falseRate:.017,modelType:P.LLM,optimizeType:M.Similarity},{llmName:"PreTrainModel-lcs",desc:"在PreTrainModel基础上结合最长公共子序列（LCS）算法，与您的企业白名单进行匹配，提升准确率。",accuracy:.79,falseRate:.022,modelType:P.PreTrain,optimizeType:M.Similarity},{llmName:"LLM-VulDet",desc:"使用大语言模型（LLM）进行漏洞检测，能够检测出具体的版本信息。",accuracy:.79,falseRate:.022,infoTag:"版本检测",needVip:!0,modelType:P.LLM,optimizeType:M.None},{llmName:"LLM-whiteList",desc:"在LLM检测的流程中，定制化添加您的企业白名单，确保高准确率。通过阈值过滤的方式降低误报率。",accuracy:.92,falseRate:.01,infoTag:"准确率较高",needVip:!0,modelType:P.LLM,optimizeType:M.WhiteList},{llmName:"PreTrainModel-whiteList",desc:"在PreTrainModel检测的流程中，定制化添加您的企业白名单，确保高准确率。通过阈值过滤的方式降低误报率。",accuracy:.83,falseRate:.02,infoTag:"准确率较高",needVip:!0,modelType:P.PreTrain,optimizeType:M.WhiteList}]),d=_(()=>{const n=s.value.filter(({modelType:b})=>t.value.model=="all"?!0:t.value.model==b).filter(({optimizeType:b})=>{const{optimize:k}=t.value;return k=="all"?!0:k==b}),c=n.findIndex(b=>{var k;return b.llmName===((k=o.value)==null?void 0:k.detectStrategy)});if(c!==-1){const[b]=n.splice(c,1);n.unshift(b)}return n}),o=z({similarityThreshold:.7,maxDetectNums:3,detectStrategy:"LLM",isMember:1});Ke(()=>{Qt().then(n=>{o.value=n.data.obj})});const V=n=>{o.value&&(o.value.similarityThreshold=n,f())},m=n=>{o.value&&(o.value.maxDetectNums=n,f())};Z(()=>{var n;return(n=o.value)==null?void 0:n.detectStrategy},n=>{console.log("change");const c=s.value.findIndex(b=>b.llmName===n);if(c!==-1){const[b]=s.value.splice(c,1);s.value.unshift(b)}},{immediate:!0});const u=n=>{o.value&&(o.value.detectStrategy=n,f())},f=()=>{o.value&&Ht(o.value).then(()=>ut.success("已成功修改配置"))};return(n,c)=>{var $,B,I;const b=at,k=Fe;return y(),w("div",Jt,[i("div",Zt,[i("div",Dt,[i("div",el,[T(b,{color:"#336FFF",size:"28",class:"title-icon"},{default:Y(()=>[T(l(nt))]),_:1}),c[0]||(c[0]=i("div",{class:"title-text"},[i("h1",{class:"page-title"},"应用优化"),i("p",{class:"page-subtitle"},"配置检测策略和模型参数，提升漏洞检测准确率")],-1))])])]),i("div",tl,[i("div",ll,[i("h2",al,[T(b,{class:"section-icon"},{default:Y(()=>[T(l(st))]),_:1}),c[1]||(c[1]=fe(" 参数配置 "))])]),i("div",nl,[T(Ft,{"threshold-name":($=o.value)!=null&&$.detectStrategy.endsWith("whiteList")?"误报过滤阈值":"相似度阈值",threshold:((B=o.value)==null?void 0:B.similarityThreshold)??.5,K:((I=o.value)==null?void 0:I.maxDetectNums)??1,"onUpdate:threshold":V,"onUpdate:K":m},null,8,["threshold-name","threshold","K"])])]),i("div",sl,[i("div",ol,[i("h2",il,[T(b,{class:"section-icon"},{default:Y(()=>[T(l(ot))]),_:1}),c[2]||(c[2]=fe(" 模型筛选 "))])]),i("div",rl,[i("div",ul,[i("div",dl,[c[3]||(c[3]=i("div",{class:"filter-label"},"模型类型",-1)),i("ul",cl,[(y(),w(A,null,ue(r,p=>i("li",{key:p.value,onClick:C=>t.value.model=p.value,class:U([{chosen:p.value===t.value.model},"filter-item"])},q(p.label),11,ml)),64))])]),i("div",vl,[c[4]||(c[4]=i("div",{class:"filter-label"},"优化器",-1)),i("ul",fl,[(y(),w(A,null,ue(a,p=>i("li",{key:p.value,onClick:C=>t.value.optimize=p.value,class:U([{chosen:p.value===t.value.optimize},"filter-item"])},q(p.label),11,gl)),64))])])])])]),i("div",hl,[i("div",yl,[i("h2",bl,[T(b,{class:"section-icon"},{default:Y(()=>[T(l(it))]),_:1}),c[5]||(c[5]=fe(" 检测模型 "))]),i("div",pl,[i("span",Vl,"共 "+q(d.value.length)+" 个模型",1),T(k,{class:"box-item",effect:"dark",content:"提高阈值能提升检测准确率, 但有可能减少预测结果",placement:"bottom"},{default:Y(()=>[T(b,{class:"info-icon"},{default:Y(()=>[T(l(rt))]),_:1})]),_:1})])]),i("div",_l,[i("div",Sl,[(y(!0),w(A,null,ue(d.value,p=>{var C,N;return y(),D(Gt,{key:p.llmName,"is-vip":((C=o.value)==null?void 0:C.isMember)==1,"is-chosen":p.llmName==((N=o.value)==null?void 0:N.detectStrategy),info:p,"onUpdate:name":u},null,8,["is-vip","is-chosen","info"])}),128))])])])])}}}),Ml=Ve(wl,[["__scopeId","data-v-af1919fc"]]);export{Ml as default};
