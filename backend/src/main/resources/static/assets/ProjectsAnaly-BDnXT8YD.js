import{d as j,l as c,ah as C,a as _,A as t,p as s,w as i,E as L,a3 as h,av as w,aw as V,F as k,q as B,ax as F,t as S,ay as A,f as n,aH as E,aI as z,aA as D,e as P,aJ as I,aB as T,aC as J,aK as M,o as r,aG as O}from"./index-GjuQlPlU.js";import{g as W,e as G,b as q}from"./const-BlzM5dIV.js";import"./el-input-number-Bt7L98Zh.js";import"./index-D72j5SSo.js";const H={class:"analysis-view-container"},K={class:"unified-header-section"},R={class:"unified-header-content"},$={class:"title-section"},Q={class:"content-section"},U={class:"section-header"},X={class:"section-title"},Y={class:"chart-content"},Z={class:"two-column-layout"},tt={class:"content-section left-column"},et={class:"section-header"},st={class:"section-title"},at={class:"projects-content"},ot={key:0,class:"loading-container"},it={key:2,class:"empty-state"},nt={class:"right-column"},lt={class:"content-section stat-section"},ct={class:"section-header"},dt={class:"section-title"},rt={class:"stats-content"},ut={class:"stat-item"},_t={class:"stat-icon-wrapper scanned-icon"},ht={class:"stat-details"},vt={class:"stat-value"},mt={class:"stat-item"},pt={class:"stat-icon-wrapper vuln-icon"},yt={class:"stat-details"},ft={class:"stat-value"},gt={class:"content-section"},bt={class:"section-header"},wt={class:"section-title"},St={class:"chart-content"},Nt=j({__name:"ProjectsAnaly",props:{project:{}},setup(xt){const v=c([]),m=c({tooltip:{trigger:"axis"},legend:{data:["高风险","中风险","低风险"],right:"5%",top:"5%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{name:"高风险",type:"line",smooth:!0,data:[0,0,0,0,0,0,0],itemStyle:{color:"#f5800c"}},{name:"中风险",type:"line",smooth:!0,data:[0,0,0,0,0,0,0],itemStyle:{color:"#fac858"}},{name:"低风险",type:"line",smooth:!0,data:[0,0,0,0,0,0,0],itemStyle:{color:"#91cc75"}}]}),u=c({tooltip:{trigger:"item"},legend:{orient:"vertical",right:"5%",top:"center"},series:[{type:"pie",radius:["40%","70%"],center:["35%","50%"],avoidLabelOverlap:!1,padAngle:5,itemStyle:{borderRadius:10},label:{show:!1,position:"center"},emphasis:{label:{show:!0,formatter:"{b}: {d}%",fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:0,name:"Java"},{value:0,name:"C++"}]}]}),p=(o,e)=>{let a="{}";o=="high"?a=e.highVulnerabilityNumByDay:o=="mid"?a=e.midVulnerabilityNumByDay:o=="low"&&(a=e.lowVulnerabilityNumByDay);const d=JSON.parse(a),l=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],b=[];for(let x of l)b.push(d[x]??0);return b},y=c(!1),N=()=>{y.value=!0,G().then(o=>{v.value=o}).catch(o=>{console.log(o),A.error("获取项目列表失败")}).finally(()=>{y.value=!1})},f=c(0),g=c(0);return C(()=>{N(),W().then(o=>{const e=o.data.obj,a=e.vulnerabilityNum;f.value=e.thirdLibraryNum,g.value=a;const d=[{...u.value.series[0],data:[{value:e.javaVulnerabilityNum,name:"Java"},{value:e.cVulnerabilityNum,name:"C/C++"}]}];u.value={...u.value,series:d};const l=[{name:"高风险",type:"line",smooth:!0,data:p("high",e),itemStyle:{color:"#f5800c"}},{name:"中风险",type:"line",smooth:!0,data:p("mid",e),itemStyle:{color:"#fac858"}},{name:"低风险",type:"line",smooth:!0,data:p("low",e),itemStyle:{color:"#91cc75"}}];m.value={...m.value,series:l}})}),(o,e)=>{const a=L,d=F;return r(),_("div",H,[t("div",K,[t("div",R,[t("div",$,[s(a,{color:"#336FFF",size:"28",class:"title-icon"},{default:i(()=>[s(n(E))]),_:1}),e[0]||(e[0]=t("div",{class:"title-text"},[t("h1",{class:"page-title"},"项目综合分析"),t("p",{class:"page-subtitle"},"全面分析项目漏洞趋势与组件分布")],-1))])])]),t("div",Q,[t("div",U,[t("h2",X,[s(a,{class:"section-icon"},{default:i(()=>[s(n(z))]),_:1}),e[1]||(e[1]=h(" 漏洞情况统计 "))])]),t("div",Y,[s(w,{width:"100%",height:"280px",option:m.value},null,8,["option"])])]),t("div",Z,[t("div",tt,[t("div",et,[t("h2",st,[s(a,{class:"section-icon"},{default:i(()=>[s(n(D))]),_:1}),e[2]||(e[2]=h(" 待解决项目 "))])]),t("div",at,[y.value?(r(),_("div",ot,[s(V,{size:"large"})])):v.value.length>0?(r(!0),_(k,{key:1},B(v.value,l=>(r(),P(q,{key:l.id,project:l,canEdit:!1},null,8,["project"]))),128)):(r(),_("div",it,[s(d,{description:"暂无待解决项目","image-size":100})]))])]),t("div",nt,[t("div",lt,[t("div",ct,[t("h2",dt,[s(a,{class:"section-icon"},{default:i(()=>[s(n(I))]),_:1}),e[3]||(e[3]=h(" 组件统计 "))])]),t("div",rt,[t("div",ut,[t("div",_t,[s(a,{size:24},{default:i(()=>[s(n(T))]),_:1})]),t("div",ht,[e[4]||(e[4]=t("div",{class:"stat-label"},"已扫描",-1)),t("div",vt,S(f.value),1)])]),t("div",mt,[t("div",pt,[s(a,{size:24},{default:i(()=>[s(n(J))]),_:1})]),t("div",yt,[e[5]||(e[5]=t("div",{class:"stat-label"},"漏洞组件数",-1)),t("div",ft,S(g.value),1)])])])]),t("div",gt,[t("div",bt,[t("h2",wt,[s(a,{class:"section-icon"},{default:i(()=>[s(n(M))]),_:1}),e[6]||(e[6]=h(" 编程语言占比 "))])]),t("div",St,[s(w,{width:"100%",height:"280px",option:u.value},null,8,["option"])])])])])])}}}),kt=O(Nt,[["__scopeId","data-v-7e9a9b16"]]);export{kt as default};
