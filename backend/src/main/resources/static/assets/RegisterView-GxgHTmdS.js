import{d as I,r as f,g as d,K as g,G as l,F as t,C as u,M as w,I as R,N as Z,H as B,Q as S,c7 as T,a4 as V,ca as k,f as L,c as M,A as _,a1 as v,c9 as x,cb as b,ce as $,ag as D}from"./index-B9RSddI6.js";const F={class:"register"},G={class:"card"},H={class:"input-container"},J={class:"input-container"},K={key:0,class:"warning"},P={class:"input-container"},Q={class:"strength-indicator"},W={class:"strength-text"},j={class:"input-container"},q={key:0,class:"warning"},O=I({__name:"RegisterView",setup(X){const p=f(""),r=f(""),a=f(""),c=f(""),h=d(()=>r.value?/^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$/.test(r.value):!0),s=d(()=>{if(!a.value)return"";let m=a.value.length>=6,e=a.value.length>=10,n=a.value.match(/[A-Z]/),i=a.value.match(/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]+/),o=a.value.match(/[0-9]/),U=a.value.match(/[a-z]/);return!m||!n||!o||!U?"weak":e&&i?"strong":"medium"}),C=d(()=>s.value===""?"":s.value==="weak"?"密码较弱，请重新选择":s.value==="medium"?"密码强度中等":"密码较强"),z=d(()=>s.value===""?"":s.value==="weak"?"red":s.value==="medium"?"orange":"green"),A=d(()=>s.value===""?"":s.value==="weak"?"25%":s.value==="medium"?"50%":"75%"),N=d(()=>p.value.length!==0&&r.value.length!==0&&h.value&&a.value.length!=0&&a.value===c.value&&s.value!=="weak"),y=()=>{const m={username:p.value,email:r.value,password:a.value,phone:""};T.register(m).then(e=>{console.log(e),V.success("注册成功！"),k.push("/login")}).catch(e=>{var n;console.error("注册失败:",e),V.error(((n=e==null?void 0:e.data)==null?void 0:n.message)||"注册失败，请稍后重试")})},E=()=>{k.push("/login")};return(m,e)=>{const n=L,i=M;return _(),g("div",F,[l("div",G,[e[10]||(e[10]=l("h2",null,"库灵之眼系统",-1)),l("div",H,[e[4]||(e[4]=l("div",{class:"input-title"},"用户名",-1)),t(i,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=o=>p.value=o),placeholder:"请输入您的用户名",clearable:""},{prefix:u(()=>[t(n,null,{default:u(()=>[t(v(x))]),_:1})]),_:1},8,["modelValue"])]),l("div",J,[e[5]||(e[5]=l("div",{class:"input-title"},"邮箱",-1)),t(i,{modelValue:r.value,"onUpdate:modelValue":e[1]||(e[1]=o=>r.value=o),placeholder:"请输入您常用的邮箱",clearable:""},{prefix:u(()=>[t(n,null,{default:u(()=>[t(v(x))]),_:1})]),_:1},8,["modelValue"]),h.value?w("",!0):(_(),g("div",K,"邮箱格式不正确"))]),l("div",P,[e[6]||(e[6]=l("div",{class:"input-title"},"密码",-1)),t(i,{modelValue:a.value,"onUpdate:modelValue":e[2]||(e[2]=o=>a.value=o),"show-password":"",placeholder:"请输入密码",clearable:""},{prefix:u(()=>[t(n,null,{default:u(()=>[t(v(b))]),_:1})]),_:1},8,["modelValue"]),l("div",Q,[l("div",{class:"strength",style:R({width:A.value,backgroundColor:z.value})},null,4),l("span",W,Z(C.value),1)])]),l("div",j,[e[7]||(e[7]=l("div",{class:"input-title"},"确认您的密码",-1)),t(i,{modelValue:c.value,"onUpdate:modelValue":e[3]||(e[3]=o=>c.value=o),"show-password":"",placeholder:"请再次输入密码",clearable:""},{prefix:u(()=>[t(n,null,{default:u(()=>[t(v(b))]),_:1})]),_:1},8,["modelValue"]),c.value!==""&&a.value!==c.value?(_(),g("div",q,"两次密码不一致")):w("",!0)]),l("div",{class:B(["confirm-button",{disabled:!N.value}]),onClick:y},[t(n,null,{default:u(()=>[t(v($))]),_:1}),e[8]||(e[8]=l("span",{class:"confirm-text"},"注册",-1))],2),l("div",{class:"other-container",onClick:E},e[9]||(e[9]=[S(" 已经有账户？"),l("span",{class:"link"},"去登录",-1)]))])])}}}),ee=D(O,[["__scopeId","data-v-1ef2d345"]]);export{ee as default};
