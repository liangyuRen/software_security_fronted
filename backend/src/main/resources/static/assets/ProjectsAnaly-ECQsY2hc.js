import{d as E,r as n,q as V,K as v,F as t,C as a,a1 as m,a2 as p,G as s,a3 as j,a4 as k,a5 as F,A as u,a6 as z,Q as b,a7 as A,a8 as C,ad as D,B as L,a9 as P,aa as I,f as T,ae as M,ac as O,af as J,ag as W}from"./index-B9RSddI6.js";import{g as G,e as q,b as K,E as Q}from"./const-COi-R0QB.js";import"./el-input-number-Cv7HxLUV.js";import"./index-CO20o_4f.js";const R={class:"data-infos"},$={key:0,style:{display:"flex","justify-content":"center","align-items":"center",height:"200px"}},H={class:"right-info"},U={class:"static"},X={style:{display:"inline-flex","align-items":"center"}},Y={style:{display:"inline-flex","align-items":"center"}},Z=E({__name:"ProjectsAnaly",props:{project:{}},setup(ee){const f=n([]),y=n({tooltip:{trigger:"axis"},legend:{data:["高风险","中风险","低风险"],right:"5%",top:"5%"},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:["Mon","Tue","Wed","Thu","Fri","Sat","Sun"]},yAxis:{type:"value"},series:[{name:"高风险",type:"line",smooth:!0,data:[0,0,0,0,0,0,0],itemStyle:{color:"#f5800c"}},{name:"中风险",type:"line",smooth:!0,data:[0,0,0,0,0,0,0],itemStyle:{color:"#fac858"}},{name:"低风险",type:"line",smooth:!0,data:[0,0,0,0,0,0,0],itemStyle:{color:"#91cc75"}}]}),c=n({tooltip:{trigger:"item"},legend:{orient:"vertical",right:"5%",top:"center"},series:[{type:"pie",radius:["40%","70%"],center:["35%","50%"],avoidLabelOverlap:!1,padAngle:5,itemStyle:{borderRadius:10},label:{show:!1,position:"center"},emphasis:{label:{show:!0,formatter:"{b}: {d}%",fontSize:"20",fontWeight:"bold"}},labelLine:{show:!1},data:[{value:0,name:"Java"},{value:0,name:"C++"}]}]}),_=(o,e)=>{let l="{}";o=="high"?l=e.highVulnerabilityNumByDay:o=="mid"?l=e.midVulnerabilityNumByDay:o=="low"&&(l=e.lowVulnerabilityNumByDay);const i=JSON.parse(l),r=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],d=[];for(let h of r)d.push(i[h]??0);return d},g=n(!1),B=()=>{g.value=!0,q().then(o=>{f.value=o}).catch(o=>{console.log(o),k.error("获取项目列表失败")}).finally(()=>{g.value=!1})},S=n(0),x=n(0);return V(()=>{B(),G().then(o=>{const e=o.data.obj,l=e.vulnerabilityNum;S.value=e.thirdLibraryNum,x.value=l;const i=[{...c.value.series[0],data:[{value:e.javaVulnerabilityNum,name:"Java"},{value:e.cVulnerabilityNum,name:"C/C++"}]}];c.value={...c.value,series:i};const r=[{name:"高风险",type:"line",smooth:!0,data:_("high",e),itemStyle:{color:"#f5800c"}},{name:"中风险",type:"line",smooth:!0,data:_("mid",e),itemStyle:{color:"#fac858"}},{name:"低风险",type:"line",smooth:!0,data:_("low",e),itemStyle:{color:"#91cc75"}}];y.value={...y.value,series:r}})}),(o,e)=>{const l=T,i=M,r=F,d=O,h=J,w=Q;return u(),v(j,null,[t(r,{"separator-icon":m(A),class:"bread"},{default:a(()=>[t(i,{to:{path:"/"}},{default:a(()=>[t(l,{color:"#336FFF",size:"14"},{default:a(()=>[t(m(z))]),_:1}),e[0]||(e[0]=s("span",{class:"bread-item"},"项目管理",-1))]),_:1}),t(i,null,{default:a(()=>e[1]||(e[1]=[b("项目综合分析")])),_:1})]),_:1},8,["separator-icon"]),t(p,{title:"漏洞情况统计",width:"auto"},{main:a(()=>[t(C,{width:"100%",height:"200px",option:y.value},null,8,["option"])]),_:1}),s("div",R,[t(p,{title:"待解决项目"},{main:a(()=>[g.value?(u(),v("div",$,[t(d,{size:"large"})])):f.value.length>0?(u(!0),v(j,{key:1},D(f.value,N=>(u(),L(K,{key:N.id,project:N,canEdit:!1},null,8,["project"]))),128)):(u(),L(h,{key:2,description:"暂无待解决项目"}))]),_:1}),s("div",H,[t(p,{title:"组件统计"},{main:a(()=>[s("div",U,[t(w,{value:S.value,"value-style":{fontSize:"36px",color:"#336fff"}},{title:a(()=>[s("div",X,[t(l,{style:{"margin-right":"4px"},size:14},{default:a(()=>[t(m(P))]),_:1}),e[2]||(e[2]=b(" 已扫描 "))])]),_:1},8,["value"]),t(w,{value:x.value,"value-style":{fontSize:"36px",color:"#336fff"}},{title:a(()=>[s("div",Y,[t(l,{style:{"margin-right":"4px"},size:14},{default:a(()=>[t(m(I))]),_:1}),e[3]||(e[3]=b(" 漏洞组件数 "))])]),_:1},8,["value"])])]),_:1}),t(p,{title:"各项编程语言占比"},{main:a(()=>[t(C,{width:"100%",height:"250px",option:c.value},null,8,["option"])]),_:1})])])],64)}}}),ie=W(Z,[["__scopeId","data-v-7fd88c08"]]);export{ie as default};
