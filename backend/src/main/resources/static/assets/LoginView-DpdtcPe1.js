import{d as B,l as r,a as w,A as a,t as k,p as l,w as t,B as L,E as N,ay as s,ch as y,cq as S,f as i,cj as I,cr as x,cs as U,cm as h,o as b,aG as P}from"./index-GjuQlPlU.js";const M={class:"login"},T={class:"card"},q={key:0},A={class:"input-container"},D={class:"input-container"},G={key:1},R={class:"input-container"},z={class:"input-container"},F={class:"input-container"},H={class:"input-container"},J={class:"input-container"},K={class:"switch-container"},O={key:0},Q={key:1},W=B({__name:"LoginView",setup(X){const d=r(!0),c=r(""),g=r(""),m=r(""),f=r(""),_=r(""),v=r(""),V=r(""),C=()=>{d.value=!d.value,d.value?(m.value="",f.value="",_.value="",v.value="",V.value=""):(c.value="",g.value="")},E=()=>{if(!c.value||!g.value){s.warning("请输入用户名和密码");return}y.login(c.value,g.value).then(n=>{if(console.log(n),n.data.code!==200){s.error(n.data.obj);return}localStorage.setItem("companyId",n.data.obj.companyId),localStorage.setItem("companyName",n.data.obj.companyName),localStorage.setItem("username",c.value),s.success("登录成功"),setTimeout(()=>{S.push("/")},500)}).catch(n=>{s.error(n)})},j=()=>{if(!m.value){s.warning("请输入用户名");return}if(!f.value){s.warning("请输入邮箱");return}if(!_.value){s.warning("请输入电话号码");return}if(!v.value){s.warning("请输入密码");return}if(v.value!==V.value){s.warning("两次输入的密码不一致");return}const n={username:m.value,email:f.value,password:v.value,phone:_.value};y.register(n).then(e=>{if(console.log(e),e.data.code!==200){s.error(e.data.obj||"注册失败");return}s.success("注册成功，请登录"),setTimeout(()=>{d.value=!0,m.value="",f.value="",v.value="",V.value="",_.value=""},1e3)}).catch(e=>{s.error("注册失败："+e)})};return(n,e)=>{const u=N,p=L;return b(),w("div",M,[a("div",T,[a("h2",null,k(d.value?"库灵之眼系统":"用户注册"),1),d.value?(b(),w("div",q,[a("div",A,[e[7]||(e[7]=a("div",{class:"input-title"},"用户名/邮箱",-1)),l(p,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=o=>c.value=o),placeholder:"请输入您的用户名或邮箱",clearable:""},{prefix:t(()=>[l(u,null,{default:t(()=>[l(i(I))]),_:1})]),_:1},8,["modelValue"])]),a("div",D,[e[8]||(e[8]=a("div",{class:"input-title"},"密码",-1)),l(p,{modelValue:g.value,"onUpdate:modelValue":e[1]||(e[1]=o=>g.value=o),"show-password":"",placeholder:"请输入密码",clearable:""},{prefix:t(()=>[l(u,null,{default:t(()=>[l(i(x))]),_:1})]),_:1},8,["modelValue"])]),a("div",{class:"confirm-button",onClick:E},[l(u,null,{default:t(()=>[l(i(U))]),_:1}),e[9]||(e[9]=a("span",{class:"confirm-text"},"登录",-1))])])):(b(),w("div",G,[a("div",R,[e[10]||(e[10]=a("div",{class:"input-title"},"用户名",-1)),l(p,{modelValue:m.value,"onUpdate:modelValue":e[2]||(e[2]=o=>m.value=o),placeholder:"请输入用户名",clearable:""},{prefix:t(()=>[l(u,null,{default:t(()=>[l(i(I))]),_:1})]),_:1},8,["modelValue"])]),a("div",z,[e[11]||(e[11]=a("div",{class:"input-title"},"邮箱",-1)),l(p,{modelValue:f.value,"onUpdate:modelValue":e[3]||(e[3]=o=>f.value=o),placeholder:"请输入邮箱",clearable:""},{prefix:t(()=>[l(u,null,{default:t(()=>[l(i(h))]),_:1})]),_:1},8,["modelValue"])]),a("div",F,[e[12]||(e[12]=a("div",{class:"input-title"},"手机号码",-1)),l(p,{modelValue:_.value,"onUpdate:modelValue":e[4]||(e[4]=o=>_.value=o),placeholder:"请输入手机号码",clearable:""},{prefix:t(()=>[l(u,null,{default:t(()=>[l(i(h))]),_:1})]),_:1},8,["modelValue"])]),a("div",H,[e[13]||(e[13]=a("div",{class:"input-title"},"密码",-1)),l(p,{modelValue:v.value,"onUpdate:modelValue":e[5]||(e[5]=o=>v.value=o),"show-password":"",placeholder:"请输入密码",clearable:""},{prefix:t(()=>[l(u,null,{default:t(()=>[l(i(x))]),_:1})]),_:1},8,["modelValue"])]),a("div",J,[e[14]||(e[14]=a("div",{class:"input-title"},"确认密码",-1)),l(p,{modelValue:V.value,"onUpdate:modelValue":e[6]||(e[6]=o=>V.value=o),"show-password":"",placeholder:"请再次输入密码",clearable:""},{prefix:t(()=>[l(u,null,{default:t(()=>[l(i(x))]),_:1})]),_:1},8,["modelValue"])]),a("div",{class:"confirm-button",onClick:j},[l(u,null,{default:t(()=>[l(i(U))]),_:1}),e[15]||(e[15]=a("span",{class:"confirm-text"},"注册",-1))])])),a("div",K,[d.value?(b(),w("span",O,"还没有账号？")):(b(),w("span",Q,"已有账号？")),a("span",{class:"link",onClick:C},k(d.value?"立即注册":"立即登录"),1)])])])}}}),Z=P(W,[["__scopeId","data-v-ba23ec61"]]);export{Z as default};
